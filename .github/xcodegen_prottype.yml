name: Pocket Poster
options:
  bundleIdPrefix: com.lemin
  deploymentTarget:
    iOS: '16.0'
  createIntermediateGroups: true
  developmentRegion: en

packages:
  ZIPFoundation:
    url: https://github.com/weichsel/ZIPFoundation
    from: 0.9.19
  Dynamic:
    url: https://github.com/mhdhejazi/Dynamic
    from: 1.2.0
  swiftui-cached-async-image:
    url: https://github.com/lorenzofiamingo/swiftui-cached-async-image
    from: 2.1.1

settings:
  base:
    SWIFT_VERSION: 5.0
    IPHONEOS_DEPLOYMENT_TARGET: 16.0
    PRODUCT_NAME: $(TARGET_NAME)
  configurations:
    Debug:
      SWIFT_OPTIMIZATION_LEVEL: "-Onone"
      ENABLE_TESTABILITY: YES
      DEBUG_INFORMATION_FORMAT: dwarf
    Release:
      SWIFT_OPTIMIZATION_LEVEL: "-Owholemodule"
      DEBUG_INFORMATION_FORMAT: "dwarf-with-dsym"
      ENABLE_NS_ASSERTIONS: NO

schemes:
  Pocket Poster:
    build:
      targets:
        Pocket Poster: all
        Pocket PosterTests: all
        Pocket PosterUITests: all
    run:
      config: Debug
      targetDevice: iPhone
    test:
      config: Debug
      targetDevice: iPhone
    archive:
      config: Release
      targetDevice: iPhone

targets:
  Pocket Poster:
    type: application
    platform: iOS
    deploymentTarget: '16.0'
    bundleId: com.lemin.Pocket-Poster
    info:
      path: Pocket-Poster-Info.plist
    sources:
      - Pocket Poster/**
    resources:
      - Pocket Poster/Preview Content/**
      - Resources/VideoCAML/**
      - Pocket Poster/Assets.xcassets
      - Pocket Poster/Base.lproj/LaunchScreen.storyboard
    dependencies:
      - package: ZIPFoundation
      - package: Dynamic
      - package: swiftui-cached-async-image
    settings:
      base:
        TARGETED_DEVICE_FAMILY: "1"  # iPhoneのみ
        ASSETCATALOG_COMPILER_APPICON_NAME: AppIcon
        ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME: AccentColor
        CODE_SIGN_STYLE: Automatic
        CURRENT_PROJECT_VERSION: 0
        DEVELOPMENT_TEAM: 2P4CP47H76
        ENABLE_PREVIEWS: YES
        GENERATE_INFOPLIST_FILE: YES
        INFOPLIST_KEY_LSSupportsOpeningDocumentsInPlace: YES
        INFOPLIST_KEY_UIFileSharingEnabled: true
    localizations:
      - ar-AE
      - ar-SA
      - ar
      - bg
      - cs
      - de
      - es-MX
      - es
      - fr-BE
      - fr-CA
      - fr-CH
      - fr-LU
      - fr
      - hu
      - it
      - ja
      - ko
      - nl
      - pl
      - ru
      - th
      - tr
      - vi
      - zh-CN
      - zh-Hant

  Pocket PosterTests:
    type: bundle.unit-test
    platform: iOS
    deploymentTarget: '16.0'
    sources:
      - Pocket PosterTests/**
    settings:
      base:
        TARGETED_DEVICE_FAMILY: "1"
    dependencies:
      - target: Pocket Poster

  Pocket PosterUITests:
    type: bundle.ui-test
    platform: iOS
    deploymentTarget: '16.0'
    sources:
      - Pocket PosterUITests/**
    settings:
      base:
        TARGETED_DEVICE_FAMILY: "1"
    dependencies:
      - target: Pocket Poster

